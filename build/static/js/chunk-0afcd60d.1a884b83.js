(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0afcd60d"],{"00d8":function(t,e){(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&r.rotl(t,8)|4278255360&r.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=r.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],r=0,n=0;r<t.length;r++,n+=8)e[n>>>5]|=t[r]<<24-n%32;return e},wordsToBytes:function(t){for(var e=[],r=0;r<32*t.length;r+=8)e.push(t[r>>>5]>>>24-r%32&255);return e},bytesToHex:function(t){for(var e=[],r=0;r<t.length;r++)e.push((t[r]>>>4).toString(16)),e.push((15&t[r]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(parseInt(t.substr(r,2),16));return e},bytesToBase64:function(t){for(var r=[],n=0;n<t.length;n+=3)for(var o=t[n]<<16|t[n+1]<<8|t[n+2],s=0;s<4;s++)8*n+6*s<=8*t.length?r.push(e.charAt(o>>>6*(3-s)&63)):r.push("=");return r.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var r=[],n=0,o=0;n<t.length;o=++n%4)0!=o&&r.push((e.indexOf(t.charAt(n-1))&Math.pow(2,-2*o+8)-1)<<2*o|e.indexOf(t.charAt(n))>>>6-2*o);return r}};t.exports=r})()},"044b":function(t,e){function r(t){return!!t.constructor&&"function"===typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function n(t){return"function"===typeof t.readFloatLE&&"function"===typeof t.slice&&r(t.slice(0,0))}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&(r(t)||n(t)||!!t._isBuffer)}},"63c4":function(t,e,r){"use strict";r("d735")},"6821f":function(t,e,r){(function(){var e=r("00d8"),n=r("9a63").utf8,o=r("044b"),s=r("9a63").bin,a=function(t,r){t.constructor==String?t=r&&"binary"===r.encoding?s.stringToBytes(t):n.stringToBytes(t):o(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||t.constructor===Uint8Array||(t=t.toString());for(var i=e.bytesToWords(t),l=8*t.length,c=1732584193,u=-271733879,f=-1732584194,d=271733878,p=0;p<i.length;p++)i[p]=16711935&(i[p]<<8|i[p]>>>24)|4278255360&(i[p]<<24|i[p]>>>8);i[l>>>5]|=128<<l%32,i[14+(l+64>>>9<<4)]=l;var m=a._ff,g=a._gg,h=a._hh,v=a._ii;for(p=0;p<i.length;p+=16){var w=c,$=u,y=f,I=d;c=m(c,u,f,d,i[p+0],7,-680876936),d=m(d,c,u,f,i[p+1],12,-389564586),f=m(f,d,c,u,i[p+2],17,606105819),u=m(u,f,d,c,i[p+3],22,-1044525330),c=m(c,u,f,d,i[p+4],7,-176418897),d=m(d,c,u,f,i[p+5],12,1200080426),f=m(f,d,c,u,i[p+6],17,-1473231341),u=m(u,f,d,c,i[p+7],22,-45705983),c=m(c,u,f,d,i[p+8],7,1770035416),d=m(d,c,u,f,i[p+9],12,-1958414417),f=m(f,d,c,u,i[p+10],17,-42063),u=m(u,f,d,c,i[p+11],22,-1990404162),c=m(c,u,f,d,i[p+12],7,1804603682),d=m(d,c,u,f,i[p+13],12,-40341101),f=m(f,d,c,u,i[p+14],17,-1502002290),u=m(u,f,d,c,i[p+15],22,1236535329),c=g(c,u,f,d,i[p+1],5,-165796510),d=g(d,c,u,f,i[p+6],9,-1069501632),f=g(f,d,c,u,i[p+11],14,643717713),u=g(u,f,d,c,i[p+0],20,-373897302),c=g(c,u,f,d,i[p+5],5,-701558691),d=g(d,c,u,f,i[p+10],9,38016083),f=g(f,d,c,u,i[p+15],14,-660478335),u=g(u,f,d,c,i[p+4],20,-405537848),c=g(c,u,f,d,i[p+9],5,568446438),d=g(d,c,u,f,i[p+14],9,-1019803690),f=g(f,d,c,u,i[p+3],14,-187363961),u=g(u,f,d,c,i[p+8],20,1163531501),c=g(c,u,f,d,i[p+13],5,-1444681467),d=g(d,c,u,f,i[p+2],9,-51403784),f=g(f,d,c,u,i[p+7],14,1735328473),u=g(u,f,d,c,i[p+12],20,-1926607734),c=h(c,u,f,d,i[p+5],4,-378558),d=h(d,c,u,f,i[p+8],11,-2022574463),f=h(f,d,c,u,i[p+11],16,1839030562),u=h(u,f,d,c,i[p+14],23,-35309556),c=h(c,u,f,d,i[p+1],4,-1530992060),d=h(d,c,u,f,i[p+4],11,1272893353),f=h(f,d,c,u,i[p+7],16,-155497632),u=h(u,f,d,c,i[p+10],23,-1094730640),c=h(c,u,f,d,i[p+13],4,681279174),d=h(d,c,u,f,i[p+0],11,-358537222),f=h(f,d,c,u,i[p+3],16,-722521979),u=h(u,f,d,c,i[p+6],23,76029189),c=h(c,u,f,d,i[p+9],4,-640364487),d=h(d,c,u,f,i[p+12],11,-421815835),f=h(f,d,c,u,i[p+15],16,530742520),u=h(u,f,d,c,i[p+2],23,-995338651),c=v(c,u,f,d,i[p+0],6,-198630844),d=v(d,c,u,f,i[p+7],10,1126891415),f=v(f,d,c,u,i[p+14],15,-1416354905),u=v(u,f,d,c,i[p+5],21,-57434055),c=v(c,u,f,d,i[p+12],6,1700485571),d=v(d,c,u,f,i[p+3],10,-1894986606),f=v(f,d,c,u,i[p+10],15,-1051523),u=v(u,f,d,c,i[p+1],21,-2054922799),c=v(c,u,f,d,i[p+8],6,1873313359),d=v(d,c,u,f,i[p+15],10,-30611744),f=v(f,d,c,u,i[p+6],15,-1560198380),u=v(u,f,d,c,i[p+13],21,1309151649),c=v(c,u,f,d,i[p+4],6,-145523070),d=v(d,c,u,f,i[p+11],10,-1120210379),f=v(f,d,c,u,i[p+2],15,718787259),u=v(u,f,d,c,i[p+9],21,-343485551),c=c+w>>>0,u=u+$>>>0,f=f+y>>>0,d=d+I>>>0}return e.endian([c,u,f,d])};a._ff=function(t,e,r,n,o,s,a){var i=t+(e&r|~e&n)+(o>>>0)+a;return(i<<s|i>>>32-s)+e},a._gg=function(t,e,r,n,o,s,a){var i=t+(e&n|r&~n)+(o>>>0)+a;return(i<<s|i>>>32-s)+e},a._hh=function(t,e,r,n,o,s,a){var i=t+(e^r^n)+(o>>>0)+a;return(i<<s|i>>>32-s)+e},a._ii=function(t,e,r,n,o,s,a){var i=t+(r^(e|~n))+(o>>>0)+a;return(i<<s|i>>>32-s)+e},a._blocksize=16,a._digestsize=16,t.exports=function(t,r){if(void 0===t||null===t)throw new Error("Illegal argument "+t);var n=e.wordsToBytes(a(t,r));return r&&r.asBytes?n:r&&r.asString?s.bytesToString(n):e.bytesToHex(n)}})()},"9a63":function(t,e){var r={utf8:{stringToBytes:function(t){return r.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(r.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e},bytesToString:function(t){for(var e=[],r=0;r<t.length;r++)e.push(String.fromCharCode(t[r]));return e.join("")}}};t.exports=r},cf05:function(t,e,r){t.exports=r.p+"static/img/logo.6580d483.png"},d735:function(t,e,r){},f5c4:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-login"},[e("Dropdown",{staticClass:"locale",attrs:{trigger:"click"}},[e("a",{attrs:{href:"javascript:void(0)"}},[t._v(t._s(t.lang[t.$i18n.locale])),e("Icon",{attrs:{type:"ios-arrow-down"}})],1),e("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[e("DropdownItem",{nativeOn:{click:function(e){return t.setLocale("zh-cn")}}},[t._v("中文")]),e("DropdownItem",{nativeOn:{click:function(e){return t.setLocale("en-us")}}},[t._v("English")])],1)],1),1==t.step?e("div",{key:"first",staticClass:"loginBox"},[e("div",{staticClass:"logo"},[e("img",{attrs:{src:r("cf05")}}),e("div",{staticClass:"text"},[t._v(t._s(t.$lang("找回密码")))])]),e("Form",{ref:"stepOne",attrs:{model:t.formItem,rules:t.stepOneValidate}},[e("FormItem",{attrs:{label:t.$lang("账号"),prop:"email"}},[e("Input",{attrs:{prefix:"md-person",placeholder:t.$lang("请输入",t.$lang("账号"))},on:{"on-enter":t.verifyEmail},model:{value:t.formItem.email,callback:function(e){t.$set(t.formItem,"email",e)},expression:"formItem.email"}})],1),e("FormItem",{attrs:{label:t.$lang("验证码"),prop:"captcha"}},[e("Input",{attrs:{type:"text",prefix:"md-lock",placeholder:t.$lang("请输入",t.$lang("验证码")),maxlength:6},on:{"on-enter":t.verifyEmail},model:{value:t.formItem.captcha,callback:function(e){t.$set(t.formItem,"captcha",e)},expression:"formItem.captcha"}},[t.time?e("span",{attrs:{slot:"append"},slot:"append"},[t._v(t._s(t.time)+"s")]):e("a",{attrs:{slot:"append"},on:{click:t.getCode},slot:"append"},[t._v("获取验证码")])])],1),e("FormItem",[e("Button",{attrs:{type:"primary",long:"",ghost:"",icon:"ios-fastforward",loading:t.loading},on:{click:t.verifyEmail}},[t._v(t._s(t.$lang("下一步")))])],1)],1)],1):t._e(),2==t.step?e("div",{key:"second",staticClass:"loginBox"},[e("div",{staticClass:"logo logo2"},[e("img",{attrs:{src:r("cf05")}}),e("div",{staticClass:"text"},[t._v(t._s(t.$lang("设置密码")))])]),e("Form",{ref:"stepTwo",attrs:{model:t.formItem,rules:t.stepTwoValidate}},[e("FormItem",{attrs:{label:t.$lang("新密码"),prop:"password"}},[e("Input",{attrs:{type:"password",placeholder:t.$lang("请输入",t.$lang("新密码"))},on:{"on-enter":t.submit},model:{value:t.formItem.password,callback:function(e){t.$set(t.formItem,"password",e)},expression:"formItem.password"}})],1),e("FormItem",{attrs:{label:t.$lang("确认密码"),prop:"repassword"}},[e("Input",{attrs:{type:"password",placeholder:t.$lang("请输入",t.$lang("确认密码"))},on:{"on-enter":t.submit},model:{value:t.formItem.repassword,callback:function(e){t.$set(t.formItem,"repassword",e)},expression:"formItem.repassword"}})],1),e("FormItem",[e("Button",{attrs:{type:"primary",long:"",ghost:"",loading:t.loading},on:{click:t.submit}},[t._v(t._s(t.$lang("确定")))])],1)],1)],1):t._e(),3==t.step?e("div",{key:"three",staticClass:"loginBox"},[e("div",{staticClass:"logo logo2"},[e("img",{attrs:{src:r("cf05")}}),e("div",{staticClass:"text"},[t._v(t._s(t.$lang("成功")))])]),e("dl",{staticClass:"success"},[e("dt",[e("Icon",{attrs:{type:"md-checkmark-circle",size:"40"}})],1),e("dd",[e("Button",{attrs:{to:"/login",type:"primary",long:"",ghost:""}},[t._v(t._s(t.$lang("登录")))])],1)])]):t._e()],1)},o=[],s=r("6821f"),a=r.n(s),i=(r("a481"),{isMobilePhone:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-us",r={"zh-cn":/^(\+?0?86\-?)?1[345789]\d{9}$/,"zh-tw":/^(\+?886\-?|0)?9\d{8}$/,"en-za":/^(\+?27|0)\d{9}$/,"en-au":/^(\+?61|0)4\d{8}$/,"en-hk":/^(\+?852\-?)?[569]\d{3}\-?\d{4}$/,"fr-fr":/^(\+?33|0)[67]\d{8}$/,"pt-pt":/^(\+351)?9[1236]\d{7}$/,"el-gr":/^(\+30)?((2\d{9})|(69\d{8}))$/,"en-gb":/^(\+?44|0)7\d{9}$/,"en-us":/^(\+?1)?[2-9]\d{2}[2-9](?!11)\d{6}$/,"en-zm":/^(\+26)?09[567]\d{7}$/,"ru-ru":/^(\+?7|8)?9\d{9}$/,"nb-no":/^(\+?47)?[49]\d{7}$/,"nn-no":/^(\+?47)?[49]\d{7}$/};return e in r&&r[e].test(t)},isEmail:function(t){var e=/^[^@]{1,}@[^\.]{1,}\.[^\.0-9]{1,}$/;return e.test(t)},isCreditCard:function(t){var e=/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,r=t.replace(/[^0-9]+/g,"");if(!e.test(r))return!1;for(var n,o,s,a=0,i=r.length-1;i>=0;i--)n=r.substring(i,i+1),o=parseInt(n,10),s?(o*=2,a+=o>=10?o%10+1:o):a+=o,s=!s;return!(a%10!==0||!r)},isNumeric:function(t){return/^[-+]?[0-9]+$/.test(t)},isInt:function(t){return/^(?:[-+]?(?:0|[1-9][0-9]*))$/.test(t)},isFloat:function(t){return""!==t&&"."!==t&&/^(?:[-+]?(?:[0-9]+))?(?:\.[0-9]*)?(?:[eE][\+\-]?(?:[0-9]+))?$/.test(t)},isIp:function(t){return""!==t&&/^((25[0-5]|2[0-4]\d|1?\d?\d)\.){3}(25[0-5]|2[0-4]\d|1?\d?\d)$/.test(t)}}),l={data:function(){var t=this;return{step:1,loading:!1,time:0,formItem:{email:"",captcha:"",password:"",repassword:"",resetPwToken:""},stepOneValidate:{email:[{validator:function(t,e,r){""===e?r(new Error("请输入你的账号")):i.isEmail(e)?r():r(new Error("账号是登录时的邮箱"))},trigger:"blur"}],captcha:[{validator:function(t,e,r){""===e?r(new Error("请输入你的验证码")):/^\d{6}$/.test(e)?r():r(new Error("验证码是6位数字"))},trigger:"blur"}]},stepTwoValidate:{password:[{validator:function(e,r,n){""===r?n(new Error("请输入新密码")):r.length<8||r.length>20||!/(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])/.test(r)?n(new Error("密码8-20位字符，必须包含大小写字母和数字")):(""!==t.formItem.repassword&&t.$refs.stepTwo.validateField("repassword"),n())},trigger:"blur"}],repassword:[{validator:function(e,r,n){""===r?n(new Error("请输入确认密码")):r!=t.formItem.password?n(new Error("两次密码输入不一致")):n()},trigger:"blur"}]}}},computed:{lang:function(){return this.$store.state.lang}},watch:{time:function(){var t=this;this.time&&setTimeout((function(){t.time--}),1e3)}},methods:{setLocale:function(t){this.$store.commit("setLocale",t)},getCode:function(){var t=this;if(!i.isEmail(this.formItem.email))return this.$refs.stepOne.validateField("email");this.$axios.post("/api/v1/user/reset_password/email_captcha",this.formItem).then((function(e){0==e.code&&(t.time=60)}))},verifyEmail:function(){var t=this;this.$refs["stepOne"].validate((function(e){e&&(t.loading=!0,t.$axios.post("/api/v1/user/reset_password/verify_email_captcha",t.formItem).then((function(e){t.loading=!1,0===e.code&&(t.formItem.resetPwToken=e.data,t.step=2)})))}))},submit:function(){var t=this;this.$refs["stepTwo"].validate((function(e){e&&(t.loading=!0,t.$axios.post("/api/v1/user/reset_password",{email:t.formItem.email,resetPwToken:t.formItem.resetPwToken,password:a()(t.formItem.password)}).then((function(e){t.loading=!1,0===e.code&&(t.$Message.success("设置成功"),t.step=3)})))}))}}},c=l,u=(r("63c4"),r("2877")),f=Object(u["a"])(c,n,o,!1,null,"bfa0998e",null);e["default"]=f.exports}}]);